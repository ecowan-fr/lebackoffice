{% extends 'base.html.twig' %}

{% block title 'Settings'|trans({}, 'settings') %}

{% block body %}
{% include "settings/_header.html.twig" %}
<div class="container mx-auto mt-10">
	<div class="flex flex-col lg:flex-row">
		<div>
			{% include "settings/_vertical_menu_main.html.twig" %}
		</div>
		<div class="flex-grow sm:ml-10">
			<p class="font-extrabold text-4xl text-center">Informations sur la structure</p>
			<div class="relative mt-16">
				<div class="absolute inset-0 flex items-center" aria-hidden="true">
					<div class="w-full border-t border-gray-300"></div>
				</div>
				<div class="relative flex justify-center">
					<span class="px-2 bg-gray-100 mb-1 text-base font-bold text-gray-500">Les bases</span>
				</div>
			</div>
			{% if is_granted('settings.main.edit') %}
				<form method="post">
				{% endif %}
				<div class="flex flex-col lg:flex-row w-full mt-10">
					<div class="w-full">
						{% if is_granted('settings.main.edit') %}
							<label for="structure_name" class="block mb-1 text-gray-500">Nom de votre structure
								<span class="font-bold text-red-600">*</span>
							</label>
							<input id="structure_name" name="structure_name" class="w-full" value="{{ configs['structure.name'] }}" type="text" required>
							<label for="structure_type" class="mt-4 block mb-1 text-gray-500">Type de votre structure
								<span class="font-bold text-red-600">*</span>
							</label>
							<select class="w-full" name="structure_type" id="structure_type" required>
								<option value="Sans structure" {% if configs['structure.type'] == 'Sans structure' %} selected {% endif %}>Sans structure</option>
								<option value="Association loi 1901" {% if configs['structure.type'] == 'Association loi 1901' %} selected {% endif %}>Association loi 1901</option>
								<option value="Organisation non gouvernementale" {% if configs['structure.type'] == 'Organisation non gouvernementale' %} selected {% endif %}>Organisation non gouvernementale</option>
								<option value="Société" {% if configs['structure.type'] == 'Société' %} selected {% endif %}>Société</option>
								<option value="Autre" {% if configs['structure.type'] == 'Autre' %} selected {% endif %}>Autre</option>
							</select>
						{% else %}
							<p class="font-bold">Nom de votre structure</p>
							<p class="mt-4 text-sm">{{ configs['structure.name'] == '' ? 'Aucune information' : configs['structure.name'] }}</p>

							<p class="font-bold mt-10">Type de votre structure</p>
							<p class="mt-4 text-sm">{{ configs['structure.type'] == '' ? 'Aucune information' : configs['structure.type'] }}</p>
						{% endif %}
					</div>
					<div class="w-full lg:ml-10 mt-4 lg:mt-0">
						{% if is_granted('settings.main.edit') %}
							<label for="structure_rna" class="block mb-1 text-gray-500">N° RNA de la structure</label>
							<input id="structure_rna" name="structure_rna" class="w-full" placeholder="WXXXXXXXXX" value="{{ configs['structure.rna'] }}" type="text">
							<label for="structure_siret" class="mt-4 block mb-1 text-gray-500">N° SIRET de la structure</label>
							<input id="structure_siret" name="structure_siret" class="w-full" placeholder="XXXXXXXXXYYYYY" value="{{ configs['structure.siret'] }}" type="number">
							<label for="structure_siren" class="mt-4 block mb-1 text-gray-500">N° SIREN de la structure</label>
							<input id="structure_siren" name="structure_siren" class="w-full" placeholder="XXXXXXXXX" value="{{ configs['structure.siren'] }}" type="number">
							<label for="structure_vat" class="mt-4 block mb-1 text-gray-500">N° TVA intracommunautaire de la structure</label>
							<input id="structure_vat" name="structure_vat" class="w-full" placeholder="FRXXXXXXXXXXX" value="{{ configs['structure.vat'] }}" type="text">
							<label for="structure_eori" class="mt-4 block mb-1 text-gray-500">N° EORI de la structure</label>
							<input id="structure_eori" name="structure_eori" class="w-full" placeholder="FRXXXXXXXXXXXXXX" value="{{ configs['structure.eori'] }}" type="text">
							<label for="structure_ics" class="mt-4 block mb-1 text-gray-500">N° ICS de la structure</label>
							<input id="structure_ics" name="structure_ics" class="w-full" placeholder="FRXXXXXXXXXXX" value="{{ configs['structure.ics'] }}" type="text">
						{% else %}
							<p class="font-bold mt-8 sm:mt-0">N° RNA de la structure</p>
							<p class="mt-4 text-sm">{{ configs['structure.rna'] == '' ? 'Aucune information' : configs['structure.rna'] }}</p>

							<p class="font-bold mt-10">N° SIRET de la structure</p>
							<p class="mt-4 text-sm">{{ configs['structure.siret'] == '' ? 'Aucune information' : configs['structure.siret'] }}</p>

							<p class="font-bold mt-10">N° SIREN de la structure</p>
							<p class="mt-4 text-sm">{{ configs['structure.siren'] == '' ? 'Aucune information' : configs['structure.siren'] }}</p>

							<p class="font-bold mt-10">N° TVA intracommunautaire de la structure</p>
							<p class="mt-4 text-sm">{{ configs['structure.vat'] == '' ? 'Aucune information' : configs['structure.vat'] }}</p>

							<p class="font-bold mt-10">N° EORI de la structure</p>
							<p class="mt-4 text-sm">{{ configs['structure.eori'] == '' ? 'Aucune information' : configs['structure.eori'] }}</p>

							<p class="font-bold mt-10">N° ICS de la structure</p>
							<p class="mt-4 text-sm">{{ configs['structure.ics'] == '' ? 'Aucune information' : configs['structure.ics'] }}</p>
						{% endif %}
					</div>
				</div>
				<div class="relative mt-10">
					<div class="absolute inset-0 flex items-center" aria-hidden="true">
						<div class="w-full border-t border-gray-300"></div>
					</div>
					<div class="relative flex justify-center">
						<span class="px-2 bg-gray-100 mb-1 text-base font-bold text-gray-500">Les informations de contact</span>
					</div>
				</div>
				<div class="flex flex-col lg:flex-row w-full mt-10">
					<div class="w-full">
						{% if is_granted('settings.main.edit') %}
							<label for="structure_email" class="block mb-1 text-gray-500">Email de contact de la structure
								<span class="font-bold text-red-600">*</span>
							</label>
							<input id="structure_email" name="structure_email" class="w-full" placeholder="contact@structure.com" value="{{ configs['structure.email'] }}" type="email" required>
							<label for="structure_tel" class="mt-4 block mb-1 text-gray-500">Téléphone public de la structure</label>
							<input id="structure_tel" name="structure_tel" class="w-full" placeholder="+33XXXXXXXXX" value="{{ configs['structure.tel'] }}" type="tel">
						{% else %}
							<p class="font-bold">Email de contact de la structure</p>
							<p class="mt-4 text-sm">{{ configs['structure.email'] == '' ? 'Aucune information' : configs['structure.email'] }}</p>

							<p class="font-bold mt-10">Téléphone public de la structure</p>
							<p class="mt-4 text-sm">{{ configs['structure.tel'] == '' ? 'Aucune information' : configs['structure.tel'] }}</p>
						{% endif %}
					</div>
					<div class="w-full lg:ml-10 mt-4 lg:mt-0">
						{% if is_granted('settings.main.edit') %}
							<label for="structure_adress" class="block mb-1 text-gray-500">Adresse complette de la structure</label>
							<textarea name="structure_adress" id="structure_adress" class="w-full" style="height:7.5rem;">{{ configs['structure.adress'] }}</textarea>
						{% else %}
							<p class="font-bold mt-8 sm:mt-0">Adresse complette de la structure</p>
							<p class="mt-4 text-sm">{{ configs['structure.adress'] == '' ? 'Aucune information' : configs['structure.adress']|nl2br }}</p>
						{% endif %}
					</div>
				</div>
				{% if is_granted('settings.main.edit') %}
					<button class="large mt-16 green mx-auto" type="submit">
						<i class="fad fa-save mr-3"></i>Enregistrer toutes les informations</button>
					<input type="hidden" name="token" value="{{ csrf_token('settings-main-name') }}"/>
				</form>
			{% endif %}
			<div class="relative mt-10">
				<div class="absolute inset-0 flex items-center" aria-hidden="true">
					<div class="w-full border-t border-gray-300"></div>
				</div>
				<div class="relative flex justify-center">
					<span class="px-2 bg-gray-100 mb-1 text-base font-bold text-gray-500">Les logos</span>
				</div>
			</div>
			{{ showAlert('info', 'Les logos sont utilisés sur tous les supports clients. Par exemple, les factures et les devis. Ils sont également utilisés sur le backoffice. Vous pouvez désactiver cette fonctionnalité et afficher les logos d\'origine sur le backoffice.', 'mt-5') }}
            <div class="flex flex-col lg:flex-row w-full mt-10">
                <div class="w-full text-center flex flex-col items-center">
                    <p class="font-bold text-lg">Version Light (par défaut)</p>
					{% if configs['structure.logo.url.light'] == '/images/logo/logo-lebackoffice-noir.svg' %}
						{% if is_granted('settings.main.edit') %}
							<label class="waves-effect addlicence mt-6">
								<i class="fa-duotone fa-image text-blue-400 text-7xl"></i>
								<span class="mt-5 block text-lg font-medium text-gray-700">Importer un logo light</span>
								<form action="{{ path('settings.saveLogo') }}" method="post" enctype="multipart/form-data">
									<input onChange="submit();" name="structure_logo_url_light" type='file' class="hidden" accept=".png,.jpg,.jpeg,.svg">
									<input type="hidden" name="token" value="{{ csrf_token('settings-main-logo') }}"/>
								</form>
							</label>
						{% else %}
							<p class="mt-5 text-sm">Vous n'avez pas la permission de modifier ce logo.</p>
						{% endif %}
					{% else %}
                        <div class="bg-gray-100 p-10 mt-5 rounded-md w-full">
                            <img src="{{ configs['structure.logo.url.light'] }}" alt="Logo" class="max-w-full">
                        </div>
						{% if is_granted('settings.main.edit') %}
                        	<a href="{{ path('settings.deleteLogo', {type:'structure.logo.url.light'}) }}" class="button transparent mt-5">Supprimer</a>
						{% endif %}
					{% endif %}
                </div>
                <div class="w-full lg:ml-10 mt-4 lg:mt-0 text-center flex flex-col items-center">
                    <p class="font-bold text-lg">Version Dark</p>
					{% if configs['structure.logo.url.dark'] == '/images/logo/logo-lebackoffice-blanc.svg' %}
						{% if is_granted('settings.main.edit') %}
							<label class="waves-effect addlicence mt-6">
								<i class="fa-duotone fa-image text-blue-800 text-7xl"></i>
								<span class="mt-5 block text-lg font-medium text-gray-700">Importer un logo dark</span>
								<form action="{{ path('settings.saveLogo') }}" method="post" enctype="multipart/form-data">
									<input onChange="submit();" name="structure_logo_url_dark" type='file' class="hidden" accept=".png,.jpg,.jpeg,.svg">
									<input type="hidden" name="token" value="{{ csrf_token('settings-main-logo') }}"/>
								</form>
							</label>
						{% else %}
							<p class="mt-5 text-sm">Vous n'avez pas la permission de modifier ce logo.</p>
						{% endif %}
					{% else %}
                        <div class="bg-gray-800 p-10 mt-5 rounded-md w-full">
                            <img src="{{ configs['structure.logo.url.dark'] }}" alt="Logo" class="max-w-full">
                        </div>
						{% if is_granted('settings.main.edit') %}
                        	<a href="{{ path('settings.deleteLogo', {type:'structure.logo.url.dark'}) }}" class="button transparent mt-5">Supprimer</a>
						{% endif %}
					{% endif %}
				</div>
            </div>
            <div class="mt-14">
                <p class="text-base font-medium">Utiliser les logos personalisé sur le backoffice</p>
				{% if is_granted('settings.main.edit') %}
                <form action="{{ path('settings.saveLogoCustom') }}" method="post">
                    <input class="radio-tesla" onchange="submit();" value="0" type="radio" id="structure.logo.custom.no" name="structure_logo_custom" {% if not configs['structure.logo.custom'] %} checked {% endif %}>
                    <input class="radio-tesla" onchange="submit();" value="1" type="radio" id="structure.logo.custom.yes" name="structure_logo_custom" {% if configs['structure.logo.custom'] %} checked {% endif %}>
					<input type="hidden" name="token" value="{{ csrf_token('settings-main-logo-custom') }}"/>
                </form>
                <div class="radio-group mt-3">
                    <label for="structure.logo.custom.no"><i class="fas fa-times-circle mr-3 text-red-400"></i>Non</label>
                    <label for="structure.logo.custom.yes"><i class="fas fa-check-circle mr-3 text-green-400"></i>Oui</label>
                    <div class="selected"></div>
                </div>
				{% else %}
					<p class='my-5 font-bold'>{{ configs['structure.logo.custom'] == 1 ? "<i class='fas fa-check-circle mr-3 text-green-400'></i>Oui" : "<i class='fas fa-times-circle mr-3 text-red-400'></i>Non" }}</p>
		{% endif %}
	</div>
</div></div></div>
{% endblock %}
